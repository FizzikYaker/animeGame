Так как обработка ошибок через try, catch реализована плохо можно использовать логер Monolog (библиотека)
и выкидывать пользователя на стартовую страницу.


Почту починить и сделать функциональщину или ооп
функция( команда , таблица , масив[поле,значение] для  VALUES или WHERE, масив[] возвращяемые поля если надо иначе 0);
возвращяет успех\ошибку или масив данных


универсальняФункция( удалить , ....)
универсальняФункция( обновить , ....)

https://habr.com/ru/articles/120636/ для безопасности сессий
https://habr.com/ru/articles/340146/ для безопасной сверки id


форматировать логин